---
name: BGP
class_name: bgpEntity
dn: sys/bgp
ds_description: This data source can read the BGP configuration.
res_description: This resource can manage the BGP configuration.
doc_path: Routing%20and%20Forwarding/bgp:Entity/
doc_category: Routing
attributes:
  - nxos_name: adminSt
    tf_name: admin_state
    type: String
    description: 'The administrative state of the object or policy.'
    enum_values:
      - enabled
      - disabled
    example: enabled
child_classes:
  - class_name: bgpInst
    doc_path: Routing%20and%20Forwarding/bgp:Inst/
    rn: inst
    type: single
    tf_name: instance
    description: 'BGP instance.'
    attributes:
      - nxos_name: adminSt
        tf_name: instance_admin_state
        type: String
        description: 'The administrative state of the object or policy.'
        enum_values:
          - enabled
          - disabled
        example: enabled
      - nxos_name: asn
        tf_name: asn
        type: String
        requires_replace: true
        description: 'Autonomous system number.'
        example: '65001'
      - nxos_name: enhancedErr
        tf_name: enhanced_error_handling
        type: Bool
        description: 'Enable BGP Enhanced Error Handling to prevent inadvertent session resets for minor errors. See RFC7606 for more details.'
        example: false
    child_classes:
      - class_name: bgpDom
        doc_path: Routing%20and%20Forwarding/bgp:Dom/
        rn: dom-%s
        type: list
        tf_name: vrfs
        description: 'List of BGP VRFs.'
        attributes:
          - nxos_name: name
            tf_name: name
            type: String
            id: true
            description: 'The name of the object.'
            example: default
          - nxos_name: rtrId
            tf_name: router_id
            type: String
            description: 'The BGP router ID.'
            example: '1.1.1.1'
        child_classes:
          - class_name: bgpRtCtrl
            doc_path: Routing%20and%20Forwarding/bgp:RtCtrl/
            rn: rtctrl
            type: single
            tf_name: route_control
            description: 'BGP Route Control configuration.'
            attributes:
              - nxos_name: enforceFirstAs
                tf_name: route_control_enforce_first_as
                type: String
                description: 'Enforce First AS For EBgp. Can be configured only for VRF default.'
                enum_values:
                  - enabled
                  - disabled
                example: disabled
              - nxos_name: fibAccelerate
                tf_name: route_control_fib_accelerate
                type: String
                description: 'Accelerate the hardware updates for IP/IPv6 adjacencies for neighbor. Can be configured only for VRF default.'
                enum_values:
                  - enabled
                  - disabled
                example: enabled
              - nxos_name: logNeighborChanges
                tf_name: route_control_log_neighbor_changes
                type: String
                description: 'Log Neighbor Changes.'
                enum_values:
                  - enabled
                  - disabled
                example: enabled
              - nxos_name: supprRt
                tf_name: route_control_suppress_routes
                type: String
                description: 'Suppress Routes: Advertise only routes that are programmed in hardware to peers. Can be configured only for VRF default.'
                enum_values:
                  - enabled
                  - disabled
                example: disabled
          - class_name: bgpGr
            doc_path: Routing%20and%20Forwarding/bgp:Gr/
            rn: gr
            type: single
            tf_name: graceful_restart
            description: 'BGP Graceful Restart configuration.'
            attributes:
              - nxos_name: restartIntvl
                tf_name: graceful_restart_interval
                type: Int64
                description: 'The graceful restart interval.'
                min_int: 1
                max_int: 3600
                example: 240
              - nxos_name: staleIntvl
                tf_name: graceful_restart_stale_interval
                type: Int64
                description: 'The stale interval for routes advertised by the BGP peer.'
                min_int: 1
                max_int: 3600
                example: 1800
          - class_name: bgpDomAf
            doc_path: Routing%20and%20Forwarding/bgp:DomAf/
            rn: af-[%s]
            type: list
            tf_name: address_families
            description: 'List of BGP address families.'
            attributes:
              - nxos_name: type
                tf_name: address_family
                type: String
                id: true
                description: 'Type.'
                enum_values:
                  - ipv4-ucast
                  - ipv4-mcast
                  - vpnv4-ucast
                  - ipv6-ucast
                  - ipv6-mcast
                  - vpnv6-ucast
                  - vpnv6-mcast
                  - l2vpn-evpn
                  - ipv4-lucast
                  - ipv6-lucast
                  - lnkstate
                  - ipv4-mvpn
                  - ipv6-mvpn
                  - l2vpn-vpls
                  - ipv4-mdt
                example: 'ipv4-ucast'
              - nxos_name: critNhTimeout
                tf_name: critical_nexthop_timeout
                type: String
                description: 'The next-hop address tracking delay timer for critical next-hop reachability routes.'
                example: 2500
              - nxos_name: nonCritNhTimeout
                tf_name: non_critical_nexthop_timeout
                type: String
                description: 'The next-hop address tracking delay timer for non-critical next-hop reachability routes.'
                example: 8000
              - nxos_name: advertL2vpnEvpn
                tf_name: advertise_l2vpn_evpn
                type: String
                description: 'Advertise L2vpn Evpn.'
                enum_values:
                  - enabled
                  - disabled
                example: disabled
              - nxos_name: advPip
                tf_name: advertise_physical_ip_for_type5_routes
                type: String
                description: 'Advertise physical IP for type-5 routes'
                enum_values:
                  - enabled
                  - disabled
                example: disabled
              - nxos_name: maxEcmp
                tf_name: max_ecmp_paths
                type: Int64
                description: 'The maximum number of equal-cost paths for BGP load sharing.'
                min_int: 1
                max_int: 512
                example: 2
              - nxos_name: maxExtEcmp
                tf_name: max_external_ecmp_paths
                type: Int64
                description: 'Max External ECMP.'
                min_int: 1
                max_int: 512
                example: 1
              - nxos_name: maxExtIntEcmp
                tf_name: max_external_internal_ecmp_paths
                type: Int64
                description: 'Max External Internal ECMP.'
                min_int: 1
                max_int: 512
                example: 1
              - nxos_name: maxLclEcmp
                tf_name: max_local_ecmp_paths
                type: Int64
                description: 'Maximum number of equal-cost multipath for local paths.'
                min_int: 1
                max_int: 512
                example: 1
              - nxos_name: maxMxdEcmp
                tf_name: max_mixed_ecmp_paths
                type: Int64
                description: 'Max mixed equal-cost multipath for local and remote paths.'
                min_int: 1
                max_int: 512
                example: 1
              - nxos_name: defInfOriginate
                tf_name: default_information_originate
                type: String
                description: 'default-information originate.'
                enum_values:
                  - enabled
                  - disabled
                example: disabled
              - nxos_name: nhRtMap
                tf_name: next_hop_route_map_name
                type: String
                description: 'Next hop route map name.'
                example: ROUTEMAP1
              - nxos_name: prfxPriority
                tf_name: prefix_priority
                type: String
                description: 'Enable prefix priority for AF'
                enum_values:
                  - none
                  - high
                example: none
              - nxos_name: retainRttAll
                tf_name: retain_rt_all
                type: String
                description: 'Retain Route Target All'
                enum_values:
                  - enabled
                  - disabled
                example: disabled
              - nxos_name: supprInactive
                tf_name: advertise_only_active_routes
                type: String
                description: 'Advertise only active routes to peers'
                enum_values:
                  - enabled
                  - disabled
                example: disabled
              - nxos_name: tblMap
                tf_name: table_map_route_map_name
                type: String
                description: 'Route-map name.'
                example: ROUTE_MAP1
              - nxos_name: vniEthTag
                tf_name: vni_ethernet_tag
                type: String
                description: 'Allow VNI in Ethernet Tag field in EVPN route'
                enum_values:
                  - enabled
                  - disabled
                example: disabled
              - nxos_name: waitIgpConv
                tf_name: wait_igp_converged
                type: String
                description: 'Delay initial bestpath until redistributed IGPs have converged'
                enum_values:
                  - enabled
                  - disabled
                example: disabled
            child_classes:
              - class_name: bgpAdvPrefix
                doc_path: Routing%20and%20Forwarding/bgp:AdvPrefix/
                rn: prefix-[%s]
                type: list
                tf_name: advertised_prefixes
                description: 'List of BGP advertised prefixes.'
                attributes:
                  - nxos_name: addr
                    tf_name: prefix
                    type: String
                    id: true
                    description: 'IP address of the network or prefix to advertise.'
                    example: '192.168.1.0/24'
                  - nxos_name: rtMap
                    tf_name: route_map
                    type: String
                    description: 'Route map to modify attributes.'
                    example: rt-map
                  - nxos_name: evpn
                    tf_name: evpn
                    type: String
                    description: 'Evpn to advertise route towards evpn side.'
                    enum_values:
                      - enabled
                      - disabled
                    example: enabled
              - class_name: bgpInterLeakP
                doc_path: Routing%20and%20Forwarding/bgp:InterLeakP/
                rn: interleak-%s-interleak-%s
                type: list
                tf_name: redistributions
                description: 'List of BGP route redistributions.'
                attributes:
                  - nxos_name: proto
                    tf_name: protocol
                    type: String
                    id: true
                    description: 'The list of protocols to match.'
                    enum_values:
                      - unspecified
                      - static
                      - direct
                      - bgp
                      - isis
                      - ospf
                      - ospfv3
                      - eigrp
                      - host
                      - rip
                      - amt
                      - lisp
                      - hmm
                      - am
                      - srv6
                      - dhcpv6
                      - icmpv6
                    example: 'ospf'
                  - nxos_name: inst
                    tf_name: protocol_instance
                    type: String
                    id: true
                    description: 'The inter protocol route leak policy instance (Use `none` for `static` and `direct` protocols).'
                    example: 'OSPF1'
                  - nxos_name: rtMap
                    tf_name: route_map
                    type: String
                    description: 'The name of the default route leak policy route map. This route map name is used to control distribution.'
                    example: 'route_map_ospf_1'
                  - nxos_name: scope
                    tf_name: scope
                    type: String
                    description: 'The domain applicable to the capability.'
                    enum_values:
                      - intra
                      - inter
                      - defrt
                    example: 'inter'
                  - nxos_name: srv6PrefixType
                    tf_name: srv6_prefix_type
                    type: String
                    description: 'SRv6 Prefix Type; Valid only when proto is srv6.'
                    enum_values:
                      - unspecified
                      - locator
                    example: 'unspecified'
          - class_name: bgpPeerCont
            doc_path: Routing%20and%20Forwarding/bgp:PeerCont/
            rn: peercont-%s
            type: list
            tf_name: peer_templates
            description: 'List of BGP peer templates.'
            attributes:
              - nxos_name: name
                tf_name: name
                type: String
                id: true
                description: 'The name of the object.'
                example: SPINE-PEERS
              - nxos_name: asn
                tf_name: remote_asn
                type: String
                description: 'Autonomous System Number.'
                example: '65002'
              - nxos_name: desc
                tf_name: description
                type: String
                description: 'Description.'
                example: My Description
              - nxos_name: peerType
                tf_name: peer_type
                type: String
                description: 'Neighbor Fabric Type.'
                enum_values:
                  - fabric-internal
                  - fabric-external
                  - fabric-border-leaf
                example: 'fabric-internal'
              - nxos_name: srcIf
                tf_name: source_interface
                type: String
                description: 'Source Interface. Must match first field in the output of `show intf brief`.'
                example: 'lo0'
            child_classes:
              - class_name: bgpPeerAf
                doc_path: Routing%20and%20Forwarding/bgp:PeerAf/
                rn: af-[%s]
                type: list
                tf_name: peer_template_address_families
                description: 'List of BGP peer template address families.'
                attributes:
                  - nxos_name: type
                    tf_name: address_family
                    type: String
                    id: true
                    description: 'Type.'
                    enum_values:
                      - ipv4-ucast
                      - vpnv4-ucast
                      - ipv6-ucast
                      - vpnv6-ucast
                      - l2vpn-evpn
                      - lnkstate
                    example: 'ipv4-ucast'
                  - nxos_name: ctrl
                    tf_name: control
                    type: String
                    description: 'Peer address-family control. Choices: `rr-client`, `nh-self`, `dis-peer-as-check`, `allow-self-as`, `default-originate`, `advertisement-interval`, `suppress-inactive`, `nh-self-all`. Can be an empty string. Allowed formats:\n  - Single value. Example: `nh-self`\n  - Multiple values (comma-separated). Example: `dis-peer-as-check,nh-self,rr-client,suppress-inactive`. In this case values must be in alphabetical order.'
                    example: 'nh-self,rr-client'
                  - nxos_name: sendComExt
                    tf_name: send_community_extended
                    type: String
                    description: 'Send-community extended.'
                    enum_values:
                      - enabled
                      - disabled
                    example: enabled
                  - nxos_name: sendComStd
                    tf_name: send_community_standard
                    type: String
                    description: 'Send-community standard.'
                    enum_values:
                      - enabled
                      - disabled
                    example: enabled
                child_classes:
                  - class_name: bgpMaxPfxP
                    doc_path: Routing%20and%20Forwarding/bgp:MaxPfxP/
                    rn: maxpfxp
                    type: single
                    tf_name: max_prefix
                    description: 'BGP peer template Maximum Prefix Policy configuration.'
                    attributes:
                      - nxos_name: action
                        tf_name: max_prefix_action
                        type: String
                        description: 'Action to do when limit is exceeded.'
                        enum_values:
                          - log
                          - shut
                          - restart
                        example: restart
                      - nxos_name: maxPfx
                        tf_name: max_prefix_number
                        type: Int64
                        description: 'Maximum number of prefixes allowed from the peer.'
                        min_int: 0
                        max_int: 4294967295
                        example: 10000
                      - nxos_name: restartTime
                        tf_name: max_prefix_restart_time
                        type: Int64
                        min_int: 1
                        max_int: 65535
                        description: 'The period of time in minutes before restarting the peer when the prefix limit is reached.'
                        example: 1
                      - nxos_name: thresh
                        tf_name: max_prefix_threshold
                        type: Int64
                        description: 'The threshold percentage of the maximum number of prefixes before a warning is issued.'
                        min_int: 1
                        max_int: 100
                        example: 30
          - class_name: bgpPeer
            doc_path: Routing%20and%20Forwarding/bgp:Peer/
            rn: peer-[%s]
            type: list
            tf_name: peers
            description: 'List of BGP peers.'
            attributes:
              - nxos_name: addr
                tf_name: address
                type: String
                id: true
                description: 'Peer address.'
                example: '192.168.0.1'
              - nxos_name: asn
                tf_name: remote_asn
                type: String
                description: 'Autonomous System Number, takes value from (1-4294967295 | 1-65535[.(0-65535)]).'
                example: '65002'
              - nxos_name: name
                tf_name: description
                type: String
                description: 'The name of the object.'
                example: 'My description'
              - nxos_name: peerImp
                tf_name: peer_template
                type: String
                description: 'Peer Template To Import From.'
                example: 'SPINE-PEERS'
              - nxos_name: peerType
                tf_name: peer_type
                type: String
                description: 'Neighbor Fabric Type.'
                enum_values:
                  - fabric-internal
                  - fabric-external
                  - fabric-border-leaf
                example: 'fabric-internal'
              - nxos_name: srcIf
                tf_name: source_interface
                type: String
                description: 'Source Interface. Must match first field in the output of `show intf brief`.'
                example: 'lo0'
              - nxos_name: holdIntvl
                tf_name: hold_time
                type: Int64
                description: 'Hold Interval.'
                example: 45
                min_int: 3
                max_int: 3600
              - nxos_name: kaIntvl
                tf_name: keepalive_interval
                type: Int64
                description: 'Keepalive Interval.'
                example: 15
                min_int: 0
                max_int: 3600
              - nxos_name: ttl
                tf_name: ebgp_multihop_ttl
                type: Int64
                description: 'eBGP Multihop TTL value.'
                example: 5
                min_int: 2
                max_int: 255
              - nxos_name: ctrl
                tf_name: peer_control
                type: String
                description: 'Peer Controls. Choices: `bfd`, `dis-conn-check`, `cap-neg-off`, `no-dyn-cap`. Can be an empty string. Allowed formats:\n  - Single value. Example: `bfd`\n  - Multiple values (comma-separated). Example: `bfd,dis-conn-check`. In this case values must be in alphabetical order.'
                example: 'bfd,dis-conn-check'
              - nxos_name: passwdType
                tf_name: password_type
                type: String
                description: 'Password EnCrypt Type.'
                enum_values:
                  - '0'
                  - '3'
                  - LINE
                  - '6'
                  - '7'
                example: LINE
                exclude_test: true
              - nxos_name: password
                tf_name: password
                description: 'Password.'
                type: String
                example: secret_password
                write_only: true
            child_classes:
              - class_name: bgpLocalAsn
                doc_path: Routing%20and%20Forwarding/bgp:LocalAsn/
                rn: localasn
                type: single
                tf_name: local_asn
                description: 'BGP peer local ASN configuration.'
                attributes:
                  - nxos_name: asnPropagate
                    tf_name: local_asn_propagation
                    type: String
                    description: 'ASN Propagation.'
                    enum_values:
                      - none
                      - no-prepend
                      - replace-as
                      - dual-as
                    example: no-prepend
                  - nxos_name: localAsn
                    tf_name: local_asn
                    type: String
                    description: 'Local Autonomous System Number.'
                    mandatory: true
                    example: '65001'
              - class_name: bgpPeerAf
                doc_path: Routing%20and%20Forwarding/bgp:PeerAf/
                rn: af-[%s]
                type: list
                tf_name: peer_address_families
                description: 'List of BGP peer address families.'
                attributes:
                  - nxos_name: type
                    tf_name: address_family
                    type: String
                    id: true
                    description: 'Type.'
                    enum_values:
                      - ipv4-ucast
                      - ipv4-mvpn
                      - vpnv4-ucast
                      - ipv6-ucast
                      - vpnv6-ucast
                      - l2vpn-evpn
                      - lnkstate
                    example: 'ipv4-ucast'
                  - nxos_name: ctrl
                    tf_name: control
                    type: String
                    description: 'Peer address-family control. Choices: `rr-client`, `nh-self`, `dis-peer-as-check`, `allow-self-as`, `default-originate`, `advertisement-interval`, `suppress-inactive`, `nh-self-all`. Can be an empty string. Allowed formats:\n  - Single value. Example: `nh-self`\n  - Multiple values (comma-separated). Example: `dis-peer-as-check,nh-self,rr-client,suppress-inactive`. In this case values must be in alphabetical order.'
                    example: 'nh-self'
                  - nxos_name: sendComExt
                    tf_name: send_community_extended
                    type: String
                    description: 'Send-community extended.'
                    enum_values:
                      - enabled
                      - disabled
                    example: enabled
                  - nxos_name: sendComStd
                    tf_name: send_community_standard
                    type: String
                    description: 'Send-community standard.'
                    enum_values:
                      - enabled
                      - disabled
                    example: enabled
                child_classes:
                  - class_name: bgpRtCtrlP
                    doc_path: Routing%20and%20Forwarding/bgp:RtCtrlP/
                    rn: rtctrl-%s
                    type: list
                    tf_name: route_controls
                    description: 'List of BGP peer address family route controls.'
                    attributes:
                      - nxos_name: direction
                        tf_name: direction
                        type: String
                        id: true
                        description: 'Direction.'
                        enum_values:
                          - in
                          - out
                        example: in
                      - nxos_name: rtMap
                        tf_name: route_map_name
                        type: String
                        description: 'Route Map.'
                        example: ROUTE_MAP1
                  - class_name: bgpPfxCtrlP
                    doc_path: Routing%20and%20Forwarding/bgp:PfxCtrlP/
                    rn: pfxctrl-%s
                    type: list
                    tf_name: prefix_list_controls
                    description: 'List of BGP peer address family prefix list controls.'
                    attributes:
                      - nxos_name: direction
                        tf_name: direction
                        type: String
                        id: true
                        description: 'Direction: Specifies whether to apply this policy in the incoming or outgoing direction.'
                        enum_values:
                          - in
                          - out
                        example: in
                      - nxos_name: list
                        tf_name: list
                        type: String
                        description: 'Name of list to control the route distribution.'
                        example: PREFIX_LIST1
test_prerequisites:
  - dn: sys/fm/bgp
    class_name: fmBgp
    no_delete: true
    attributes:
      - name: adminSt
        value: enabled
  - dn: sys/fm/bfd
    class_name: fmBfd
    dependencies: [0]
    no_delete: true
    attributes:
      - name: adminSt
        value: enabled
