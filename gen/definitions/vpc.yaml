---
name: vPC
class_name: vpcEntity
dn: sys/vpc
ds_description: This data source can read the vPC (Virtual Port Channel) configuration on NX-OS devices, including the vPC domain with peer settings, keepalive, role priority, and peer gateway options.
res_description: This resource can manage the vPC (Virtual Port Channel) configuration on NX-OS devices, including the vPC domain with peer settings, keepalive, role priority, and peer gateway options.
doc_path: System/vpc:Entity/
doc_category: Switching
attributes:
  - nxos_name: adminSt
    tf_name: entity_admin_state
    type: String
    description: "The administrative state of the object or policy."
    enum_values:
      - enabled
      - disabled
    example: enabled
child_classes:
  - class_name: vpcInst
    doc_path: System/vpc:Inst/
    rn: inst
    type: single
    attributes:
      - nxos_name: adminSt
        tf_name: admin_state
        type: String
        description: "The administrative state of the object or policy."
        enum_values:
          - enabled
          - disabled
        example: enabled
      - nxos_name: ctrl
        tf_name: control
        type: String
        description: "The control state."
        allow_non_enum_values: true
        enum_values:
          - stateful-ha
        example: stateful-ha
    child_classes:
      - class_name: vpcDom
        doc_path: System/vpc:Dom/
        rn: dom
        type: single
        attributes:
          - nxos_name: adminSt
            tf_name: domain_admin_state
            type: String
            description: "vPC suspend locally."
            enum_values:
              - enabled
              - disabled
            example: enabled
          - nxos_name: id
            tf_name: domain_id
            type: Int64
            mandatory: true
            description: "Domain id."
            min_int: 1
            max_int: 1000
            example: 100
          - nxos_name: autoRecovery
            tf_name: auto_recovery
            type: String
            description: "Auto Recovery."
            enum_values:
              - enabled
              - disabled
            example: enabled
          - nxos_name: autoRecoveryIntvl
            tf_name: auto_recovery_interval
            type: Int64
            description: "Auto Recovery interval."
            min_int: 60
            max_int: 3600
            example: 480
          - nxos_name: delayRestoreOrphanPort
            tf_name: delay_restore_orphan_port
            type: Int64
            description: "Delay restore for orphan ports."
            min_int: 0
            max_int: 300
            example: 10
          - nxos_name: delayRestoreSVI
            tf_name: delay_restore_svi
            type: Int64
            description: "Delay restore for SVI."
            min_int: 1
            max_int: 3600
            example: 20
          - nxos_name: delayRestoreVPC
            tf_name: delay_restore_vpc
            type: Int64
            description: "Delay restore for vPC links."
            min_int: 1
            max_int: 3600
            example: 60
          - nxos_name: dscp
            tf_name: dscp
            type: Int64
            description: "DSCP."
            min_int: 0
            max_int: 63
            example: 0
          - nxos_name: fastConvergence
            tf_name: fast_convergence
            type: String
            description: "Fast Convergence."
            enum_values:
              - enabled
              - disabled
            example: enabled
          - nxos_name: grcflCnstncyChck
            tf_name: graceful_consistency_check
            type: String
            description: "Graceful Type-1 Consistency Check."
            enum_values:
              - enabled
              - disabled
            example: disabled
          - nxos_name: l3PeerRouter
            tf_name: l3_peer_router
            type: String
            description: "L3 Peer Router."
            enum_values:
              - enabled
              - disabled
            example: enabled
          - nxos_name: l3PeerRouterSyslog
            tf_name: l3_peer_router_syslog
            type: String
            description: "L3 Peer Router Syslog."
            enum_values:
              - enabled
              - disabled
            example: enabled
          - nxos_name: l3PeerRouterSyslogInterval
            tf_name: l3_peer_router_syslog_interval
            type: Int64
            description: "L3 Peer Router Syslog Interval."
            min_int: 1
            max_int: 3600
            example: 3000
          - nxos_name: peerGw
            tf_name: peer_gateway
            type: String
            description: "Peer Gateway."
            enum_values:
              - enabled
              - disabled
            example: enabled
          - nxos_name: peerIp
            tf_name: peer_ip
            type: String
            description: "vpc peer IP address."
            example: 1.2.3.4
          - nxos_name: peerSwitch
            tf_name: peer_switch
            type: String
            description: "vPC pair switches."
            enum_values:
              - enabled
              - disabled
            example: enabled
          - nxos_name: rolePrio
            tf_name: role_priority
            type: Int64
            description: "role priority."
            min_int: 1
            max_int: 65535
            example: 100
          - nxos_name: sysMac
            tf_name: sys_mac
            type: String
            description: "system mac."
            example: 01:01:01:01:01:01
          - nxos_name: sysPrio
            tf_name: system_priority
            type: Int64
            description: "system priority."
            min_int: 1
            max_int: 65535
            example: 100
          - nxos_name: track
            tf_name: track
            type: Int64
            description: "Tracking object to suspend vPC if object goes down."
            min_int: 0
            max_int: 500
            example: 10
          - nxos_name: virtualIp
            tf_name: virtual_ip
            type: String
            description: "vpc virtual IP address (vIP)."
            example: 1.1.1.1
          - nxos_name: delayPeerLinkBringup
            tf_name: delay_peer_link_bringup
            type: Int64
            description: "Peer link delay timer."
            min_int: 0
            max_int: 7200
            example: 60
          - nxos_name: excludeSVI
            tf_name: exclude_svi
            type: String
            description: "SVI List excluded from suspension when dual-active."
            example: "1-2"
          - nxos_name: macBpduSrcVer2
            tf_name: mac_bpdu_source_version_2
            type: Bool
            description: "Version 2 bpdu source mac-address."
            example: "false"
          - nxos_name: peerGWExcludeVLAN
            tf_name: peer_gateway_exclude_vlan
            type: String
            description: "Exclude VLAN List."
            example: "1-2"
        child_classes:
          - class_name: vpcKeepalive
            doc_path: System/vpc:Keepalive/
            rn: keepalive
            type: single
            attributes:
              - nxos_name: destIp
                tf_name: keepalive_destination_ip
                type: String
                mandatory: true
                description: "destination address."
                example: "192.168.1.1"
              - nxos_name: flushTout
                tf_name: keepalive_flush_timeout
                type: Int64
                description: "flush timeout."
                min_int: 3
                max_int: 10
                example: 3
              - nxos_name: interval
                tf_name: keepalive_interval
                type: Int64
                description: "interval."
                min_int: 400
                max_int: 10000
                example: 1000
              - nxos_name: precType
                tf_name: keepalive_precedence_type
                type: String
                description: "precedence type."
                enum_values:
                  - network
                  - internet
                  - critical
                  - flash-override
                  - flash
                  - immediate
                  - priority
                  - routine
                example: network
              - nxos_name: precValue
                tf_name: keepalive_precedence_value
                type: Int64
                description: "precedence value."
                min_int: 0
                max_int: 7
                example: 6
              - nxos_name: srcIp
                tf_name: keepalive_source_ip
                type: String
                mandatory: true
                description: "source address."
                example: "192.168.1.2"
              - nxos_name: timeout
                tf_name: keepalive_timeout
                type: Int64
                description: "timeout."
                min_int: 3
                max_int: 20
                example: 5
              - nxos_name: tosByte
                tf_name: keepalive_type_of_service_byte
                type: Int64
                description: "tos byte."
                min_int: 0
                max_int: 255
                example: 0
              - nxos_name: tosCfgType
                tf_name: keepalive_type_of_service_configuration_type
                type: String
                description: "tos config type."
                enum_values:
                  - noCfg
                  - tos-byte
                  - tos-value
                  - tos-type
                  - precedence-type
                  - precedence-value
                example: noCfg
              - nxos_name: tosType
                tf_name: keepalive_type_of_service_type
                type: String
                description: "tos type."
                enum_values:
                  - min-delay
                  - max-throughput
                  - max-reliability
                  - min-monetary-cost
                  - normal
                example: min-delay
              - nxos_name: tosValue
                tf_name: keepalive_type_of_service_value
                type: Int64
                description: "tos value."
                min_int: 0
                max_int: 15
                example: 0
              - nxos_name: udpPort
                tf_name: keepalive_udp_port
                type: Int64
                description: "port number."
                min_int: 1
                max_int: 65535
                example: 1234
              - nxos_name: vrf
                tf_name: keepalive_vrf
                description: "vrf name."
                type: String
                example: "management"
            child_classes:
              - class_name: vpcPeerLink
                doc_path: System/vpc:PeerLink/
                rn: peerlink
                type: single
                attributes:
                  - nxos_name: id
                    tf_name: peerlink_port_channel_id
                    type: String
                    mandatory: true
                    description: "An identifier."
                    example: "po1"
                  - nxos_name: adminSt
                    tf_name: peerlink_admin_state
                    type: String
                    description: "The administrative state of the object or policy."
                    enum_values:
                      - enabled
                      - disabled
                    example: enabled
                  - nxos_name: descr
                    tf_name: peerlink_description
                    type: String
                    description: "Description."
                    example: "My description"
          - class_name: vpcIf
            doc_path: System/vpc:If/
            rn: if-%v
            type: list
            tf_name: interfaces
            description: "List of vPC interfaces."
            attributes:
              - nxos_name: id
                tf_name: vpc_interface_id
                type: Int64
                id: true
                description: "The vPC interface identifier."
                min_int: 1
                max_int: 16384
                example: 1
            child_classes:
              - class_name: vpcRsVpcConf
                doc_path: System/vpc:RsVpcConf/
                rn: rsvpcConf
                type: single
                attributes:
                  - nxos_name: tDn
                    tf_name: port_channel_interface_dn
                    type: String
                    description: "Port-channel interface DN."
                    example: sys/intf/aggr-[po1]
test_prerequisites:
  - dn: sys/fm/vpc
    class_name: fmVpc
    no_delete: true
    attributes:
      - name: adminSt
        value: enabled
  - dn: sys/fm/lacp
    class_name: fmLacp
    no_delete: true
    attributes:
      - name: adminSt
        value: enabled
  - dn: sys/intf/aggr-[po1]
    class_name: pcAggrIf
    dependencies: [1]
    attributes:
      - name: id
        value: po1
